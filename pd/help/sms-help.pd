#N canvas 635 46 994 768 10;
#X obj 273 393 smsbuf \$0-blarg;
#X obj 508 272 smssynth~ \$0-blarg;
#X msg 343 285 info;
#X floatatom 518 149 5 0 0 0 - - -;
#X msg 578 199 stocgain \$1;
#X floatatom 578 179 5 0 0 0 - - -;
#X msg 563 149 transpose \$1;
#X floatatom 563 130 5 0 0 0 - - -;
#X obj 15 274 smsanal \$0-blarg;
#X floatatom 350 314 5 0 0 0 - - -;
#X msg 350 335 printframe \$1;
#N canvas 250 596 450 300 wavetable 1;
#N canvas 0 0 450 300 (subpatch) 0;
#X array audiobuf 155948 float 2;
#X coords 0 1 155948 -1 200 140 1;
#X restore 237 144 graph;
#X obj 36 143 soundfiler;
#X floatatom 36 166 0 0 0 0 - - -;
#X msg 59 103 read -resize ../../test/audio/flugel.wav audiobuf;
#X text 63 6 PD BUG: if array contents is stored in the patch and then
analyzed \, everything crashes...;
#X msg 36 75 read -resize \$1 audiobuf;
#X obj 36 52 openpanel;
#X obj 36 35 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X connect 1 0 2 0;
#X connect 3 0 1 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 6 0;
#X restore 14 331 pd wavetable;
#X msg 15 193 array audiobuf 28800;
#N canvas 871 58 450 900 analysis_params 0;
#X msg 39 49 debug \$1;
#X obj 39 1065 outlet;
#X obj 39 33 hradio 13 1 0 13 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X obj 52 113 hradio 13 1 0 2 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X obj 46 73 hradio 13 1 0 4 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X msg 46 89 format \$1;
#X msg 52 129 soundtype \$1;
#X obj 57 152 hradio 13 1 0 2 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X msg 57 168 direction \$1;
#X msg 64 209 windowsize \$1;
#X floatatom 64 190 5 3 7 0 - - -;
#X msg 70 253 windowtype \$1;
#X floatatom 77 274 5 50 600 0 - - -;
#X msg 77 293 framerate \$1;
#X obj 70 233 hradio 13 1 0 5 empty empty empty 0 -8 0 10 -262144 -1
-1 0;
#X msg 83 336 highestfreq \$1;
#X msg 92 380 minpeakmag \$1;
#X msg 103 464 minrefharmmag \$1;
#X msg 109 505 refharmdifffrommax \$1;
#X msg 114 545 defaultfund \$1;
#X msg 98 422 refharmonic \$1;
#X msg 122 585 lowestfund \$1;
#X msg 126 625 highestfund \$1;
#X msg 132 665 nguides \$1;
#X msg 137 705 ntracks \$1;
#X msg 142 744 freqdeviation \$1;
#X msg 146 782 peakcontribution \$1;
#X msg 150 820 fundcontribution \$1;
#X msg 154 857 cleantracks \$1;
#X msg 160 895 mintracklength \$1;
#X msg 164 935 maxsleepingtime \$1;
#X msg 164 975 stochastictype \$1;
#X msg 165 1014 ncoefficients \$1;
#X floatatom 83 314 5 20 22500 0 - - -;
#X floatatom 92 359 5 0 20 0 - - -;
#X floatatom 98 401 5 0 100 0 - - -;
#X floatatom 103 444 5 5 60 0 - - -;
#X floatatom 109 485 5 5 60 0 - - -;
#X floatatom 114 526 5 20 5000 0 - - -;
#X floatatom 122 566 5 20 5000 0 - - -;
#X floatatom 126 606 5 20 5000 0 - - -;
#X floatatom 132 645 5 1 500 0 - - -;
#X floatatom 137 686 5 1 500 0 - - -;
#X floatatom 142 725 5 0.1 0.5 0 - - -;
#X floatatom 146 764 5 0 1 0 - - -;
#X floatatom 150 802 5 0 1 0 - - -;
#X obj 154 840 hradio 13 1 0 2 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 160 877 5 0 10 0 - - -;
#X floatatom 164 916 5 0 0.5 0 - - -;
#X obj 164 959 hradio 13 1 0 3 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X floatatom 165 996 5 4 1028 0 - - -;
#X text 62 5 These are documented in the smsAnal manpage;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 1 0;
#X connect 6 0 1 0;
#X connect 7 0 8 0;
#X connect 8 0 1 0;
#X connect 9 0 1 0;
#X connect 10 0 9 0;
#X connect 11 0 1 0;
#X connect 12 0 13 0;
#X connect 13 0 1 0;
#X connect 14 0 11 0;
#X connect 15 0 1 0;
#X connect 16 0 1 0;
#X connect 17 0 1 0;
#X connect 18 0 1 0;
#X connect 19 0 1 0;
#X connect 20 0 1 0;
#X connect 21 0 1 0;
#X connect 22 0 1 0;
#X connect 23 0 1 0;
#X connect 24 0 1 0;
#X connect 25 0 1 0;
#X connect 26 0 1 0;
#X connect 27 0 1 0;
#X connect 28 0 1 0;
#X connect 29 0 1 0;
#X connect 30 0 1 0;
#X connect 31 0 1 0;
#X connect 32 0 1 0;
#X connect 33 0 15 0;
#X connect 34 0 16 0;
#X connect 35 0 20 0;
#X connect 36 0 17 0;
#X connect 37 0 18 0;
#X connect 38 0 19 0;
#X connect 39 0 21 0;
#X connect 40 0 22 0;
#X connect 41 0 23 0;
#X connect 42 0 24 0;
#X connect 43 0 25 0;
#X connect 44 0 26 0;
#X connect 45 0 27 0;
#X connect 46 0 28 0;
#X connect 47 0 29 0;
#X connect 48 0 30 0;
#X connect 49 0 31 0;
#X connect 50 0 32 0;
#X restore 46 240 pd analysis_params;
#X msg 347 366 save test.sms;
#X floatatom 15 301 5 0 0 0 - - -;
#X msg 580 241 synthtype \$1;
#X obj 580 222 hradio 15 1 0 3 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X obj 676 655 smsedit \$0-blarg;
#X floatatom 714 537 5 0 0 0 - - -;
#X msg 713 558 printframe \$1;
#N canvas 773 58 450 300 edit-bp 0;
#X obj 178 243 outlet;
#X obj 247 155 t b f;
#X obj 285 156 t b f;
#X floatatom 208 136 5 0 0 2 frame - -;
#X floatatom 248 136 5 0 0 2 track - -;
#X floatatom 285 136 5 0 0 2 value - -;
#X obj 208 156 t b f;
#X msg 178 59 symbol set;
#X msg 178 79 symbol add;
#X msg 178 99 symbol scale;
#X msg 178 214 bp \$1 \$2 \$3 \$4 \$5;
#X obj 68 247 print;
#X msg 108 9 symbol freq;
#X msg 108 28 symbol amp;
#X obj 178 185 pack s s 100 0 0;
#X connect 1 0 14 0;
#X connect 1 1 14 3;
#X connect 2 0 14 0;
#X connect 2 1 14 4;
#X connect 3 0 6 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X connect 6 0 14 0;
#X connect 6 1 14 2;
#X connect 7 0 14 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 10 0 0 0;
#X connect 12 0 14 1;
#X connect 13 0 14 1;
#X connect 14 0 10 0;
#X restore 725 593 pd edit-bp;
#N canvas 75 595 688 300 edit-evens 0;
#X obj 99 220 outlet;
#X msg 99 147 evens transpose \$1 \$2;
#X obj 99 114 pack 0 0;
#X obj 117 88 t b f;
#X floatatom 99 59 5 0 0 2 frame - -;
#X floatatom 135 61 5 0 0 2 midi - -;
#X obj 116 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 249 114 pack 0 0;
#X obj 267 88 t b f;
#X floatatom 249 59 5 0 0 2 frame - -;
#X floatatom 285 61 5 0 0 2 value - -;
#X obj 266 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 249 147 evens ampmod \$1 \$2;
#X obj 389 114 pack 0 0;
#X obj 407 88 t b f;
#X floatatom 389 59 5 0 0 2 frame - -;
#X floatatom 425 61 5 0 0 2 value - -;
#X obj 406 17 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 389 147 evens ampdev \$1 \$2;
#X obj 481 20 metro 100;
#X obj 483 1 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0 1
;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 2 0;
#X connect 3 1 2 1;
#X connect 4 0 2 0;
#X connect 5 0 3 0;
#X connect 6 0 5 0;
#X connect 7 0 12 0;
#X connect 8 0 7 0;
#X connect 8 1 7 1;
#X connect 9 0 7 0;
#X connect 10 0 8 0;
#X connect 11 0 10 0;
#X connect 12 0 0 0;
#X connect 13 0 18 0;
#X connect 14 0 13 0;
#X connect 14 1 13 1;
#X connect 15 0 13 0;
#X connect 16 0 14 0;
#X connect 17 0 16 0;
#X connect 18 0 0 0;
#X connect 19 0 16 0;
#X connect 20 0 19 0;
#X restore 821 598 pd edit-evens;
#X msg 793 478 verbose \$1;
#X msg 339 235 backup;
#X msg 343 260 switch;
#X msg 304 187 frames;
#X floatatom 273 412 5 0 0 0 - - -;
#X msg 668 245 sizehop 1024;
#X text 676 223 (currently crashes if you have audio running.. :(;
#X msg 38 215 verbose 1;
#X msg 273 163 open \$1;
#X obj 273 142 openpanel;
#X obj 273 125 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 317 211 verbose 1;
#X text 14 16 Step 1: analyze some sound using [smsanal]'s array method
or soundfile method. Alternatively \, load a pre-analyzed sound with
[smsbuf]'s open method. Either way \, the SMS data is now in [smsbuf]
and you can look at the header information with the "info" method or
print frame data with the "printframe" method;
#X text 497 -3 Step 2: initialize [smssynth~] with the "buffer" method.
If it has as its first argument the name of the buffer provided to
smsbuf (like all the sms externals need) \, then all you need to do
is send it "buffer". Otherwise \, send it the name of the buffer too.
;
#X text 496 75 Step 3: tell [smssynth~] what frame to synthesize with
float arguments. It will interpolate between frames to provide a smooth
synthesis.;
#X msg 502 121 buffer;
#X text 37 490 Manipulations:;
#X text 37 508 You can transpose what is being synthesized \, or adjust
the level of the stochastic component \, with arguments to [smssynth~].
Also \, you can use [smsedit] to hard-edit the data within the [smsbuf]
buffer.;
#X text 35 571 Because editing the data will distort the model \, there
is an option to make a 'backup' in the [smsbuf]. You can then switch
to the backup at any point during synthesis \, or you can use the "converge"
method in [smsedit] to gradually move the data back to the original
(by averaging).;
#X obj 793 460 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 268 100 open ../../test/sms/flugel.sms;
#X msg 676 487 converge 20 0.1;
#X msg 688 513 buffer;
#X msg 674 268 sizehop 2048;
#N canvas 0 0 702 491 dac 0;
#X obj 216 271 t b;
#X obj 216 218 f;
#X obj 216 296 f;
#X msg 330 295 0;
#X obj 216 248 moses 1;
#X obj 330 267 t b f;
#X obj 296 228 moses 1;
#X obj -110 -26 dbtorms;
#X obj -110 47 line~;
#X obj -75 119 *~;
#X obj -110 4 pack 0 50;
#X obj 140 157 bng 15 250 50 0 empty mute m 5 8 0 9 -262144 -1 -1;
#X obj -38 119 *~;
#X floatatom 126 136 4 0 120 0 dB - -;
#X obj 159 103 vsl 15 68 0 110 0 1 empty empty empty 0 -8 0 8 -262144
-1 -1 4900 0;
#X obj -12 -5 inlet~;
#X obj 54 -8 inlet~;
#X obj -77 156 dac~ 1 2;
#X text -30 -90 Modified output~ to catch in stereo \, with dsp control
;
#X obj -4 217 env~ 8092;
#X obj -5 186 *~ 0.5;
#X connect 0 0 2 0;
#X connect 1 0 4 0;
#X connect 2 0 14 0;
#X connect 3 0 14 0;
#X connect 4 0 0 0;
#X connect 4 1 5 0;
#X connect 5 0 3 0;
#X connect 6 1 2 1;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 8 0 12 0;
#X connect 9 0 17 0;
#X connect 9 0 20 0;
#X connect 10 0 8 0;
#X connect 11 0 1 0;
#X connect 12 0 17 1;
#X connect 12 0 20 0;
#X connect 14 0 7 0;
#X connect 14 0 6 0;
#X connect 14 0 1 1;
#X connect 15 0 9 1;
#X connect 16 0 12 1;
#X connect 19 0 13 0;
#X connect 20 0 19 0;
#X coords 0 -1 1 1 75 75 1 100 100;
#X restore 507 313 pd dac;
#X msg 22 163 soundfile \$1;
#X obj 22 142 openpanel;
#X obj 22 125 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 481 392 hsl 200 15 0 2159 0 0 empty timebar empty -2 -8 0 10
-262144 -1 -1 0 0;
#X floatatom 478 412 5 0 0 0 - - -;
#X msg 273 431 \; timebar range 0 \$1;
#X msg 27 103 soundfile ../../test/audio/flugel.wav;
#X connect 0 0 27 0;
#X connect 1 0 47 0;
#X connect 1 0 47 1;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 4 0 1 0;
#X connect 5 0 4 0;
#X connect 6 0 1 0;
#X connect 7 0 6 0;
#X connect 8 0 15 0;
#X connect 9 0 10 0;
#X connect 10 0 0 0;
#X connect 12 0 8 0;
#X connect 13 0 8 0;
#X connect 14 0 0 0;
#X connect 16 0 1 0;
#X connect 17 0 16 0;
#X connect 19 0 20 0;
#X connect 20 0 18 0;
#X connect 21 0 18 0;
#X connect 22 0 18 0;
#X connect 23 0 18 0;
#X connect 24 0 0 0;
#X connect 25 0 0 0;
#X connect 26 0 0 0;
#X connect 27 0 53 0;
#X connect 28 0 1 0;
#X connect 30 0 8 0;
#X connect 31 0 0 0;
#X connect 32 0 31 0;
#X connect 33 0 32 0;
#X connect 34 0 0 0;
#X connect 38 0 1 0;
#X connect 42 0 23 0;
#X connect 43 0 0 0;
#X connect 44 0 18 0;
#X connect 45 0 18 0;
#X connect 46 0 1 0;
#X connect 48 0 8 0;
#X connect 49 0 48 0;
#X connect 50 0 49 0;
#X connect 51 0 1 0;
#X connect 51 0 52 0;
#X connect 54 0 8 0;
